(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-589d8e63"],{"2eee":function(t,e,a){t.exports=a.p+"img/ho73Loading.f159bb05.gif"},"62e7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"container mt-5"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[s("div",{staticClass:"img-center"},[s("img",{staticClass:"w-50",attrs:{src:a("2eee"),alt:""}})])]),s("h1",{staticClass:"text-secondary font-weight-bold text-center mb-5"},[t._v("Half of 73°C 結帳")]),t._m(0),s("div",{staticClass:"row mt-3"},[s("div",{staticClass:"col-md-6 mb-3"},[s("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},[s("div",{staticClass:"card rounded"},[s("div",{staticClass:"card-header mb-0",attrs:{id:"headingOne"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-between"},[t._m(1),s("span",{staticClass:"h3"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])]),s("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[s("table",{staticClass:"table"},[s("tbody",[t._m(2),t._l(t.cart.carts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle text-right",attrs:{align:"center",valign:"center"}},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeCartItem(e)}}},[s("i",{staticClass:"fas fa-trash fa-lg"})])]),s("td",{attrs:{width:"100",align:"center",valign:"center"}},[s("div",{staticClass:"tt"},[s("img",{staticClass:"imgItem-center",style:"background-image: url("+e.product.imageUrl+");"})])]),s("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title)+"\n                      "),e.coupon?s("div",{staticClass:"text-info d-none d-lg-block"},[t._v("\n                        已套用優惠券\n                      ")]):t._e()]),s("td",{staticClass:"align-middle",attrs:{width:"70"}},[t._v(t._s(e.qty)+t._s(e.product.unit))]),e.product.price?s("td",{staticClass:"align-middle text-right pr-3 pr-md-2 pr-lg-3",attrs:{width:"70"}},[t._v(t._s(t._f("currency")(e.qty*e.product.price)))]):s("td",{staticClass:"align-middle text-right pr-3 pr-md-2 pr-lg-3",attrs:{width:"70"}},[t._v(t._s(t._f("currency")(e.qty*e.product.origin_price)))])])})],2),s("tfoot",[s("tr",[s("td",{attrs:{colspan:"3"}},[s("div",{staticClass:"input-group mb-0 mt-2 input-group-md"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCouponCode(e)},input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.addCouponCode}},[s("div",{staticClass:"d-none d-lg-block"},[t._v("套用優惠碼")]),s("div",{staticClass:"d-lg-none"},[t._v("套用")])])])]),s("p",{staticClass:"text-danger"},[t._v(t._s(t.findCoupon))])]),s("td",{staticClass:"align-middle text-right p-0"},[t._v("總計：")]),s("td",{staticClass:"align-middle text-right pr-3 pr-md-2 pr-lg-3",attrs:{width:"10"}},[t._v("$"+t._s(t.cart.total))])]),t.cart.total!==t.cart.final_total?s("tr",[s("td",{staticClass:"align-middle text-right text-info",attrs:{colspan:"4"}},[t._v("折扣價：")]),s("td",{staticClass:"align-middle text-right text-info pr-3 pr-md-2 pr-lg-3",attrs:{width:"10"}},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])])])])])]),s("div",{staticClass:"col-md-6 mb-3"},[s("h5",{staticClass:"text-center mb-3"},[t._v("訂購人資訊")]),s("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"userName"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"userName",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"userEmail"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"userEmail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userTel"}},[t._v("收件人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^\(?\d{2}\)?[\s\-]?\d{4}\-?\d{4}$/},expression:"{ required: true, regex:/^\\(?\\d{2}\\)?[\\s\\-]?\\d{4}\\-?\\d{4}$/ }"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("regex")},attrs:{type:"regex",id:"userTel",name:"regex",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("regex")?s("span",{staticClass:"text-danger"},[t._v("請輸入10碼數字之電話號碼")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userAddress"}},[t._v("收件人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"userAddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("地址必須輸入")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"userMessage"}},[t._v("留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"message",id:"userMessage",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),s("div",{staticClass:"d-flex justify-content-end"},[s("router-link",{attrs:{to:"/shop"}},[s("button",{staticClass:"btn btn-secondary mr-2"},[t._v("\n                繼續選購\n              ")])]),s("button",{staticClass:"btn btn-info mr-2"},[t._v("送出訂單")])],1)])])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-sm col-12"},[a("div",{staticClass:"alert alert-info text-center alert-rounded",attrs:{role:"alert"}},[t._v("\n          1.輸入訂單資料\n        ")])]),a("div",{staticClass:"col-sm col-12"},[a("div",{staticClass:"alert alert-secondary text-center alert-rounded",attrs:{role:"alert"}},[t._v("\n          2.金流付款\n        ")])]),a("div",{staticClass:"col-sm col-12"},[a("div",{staticClass:"alert alert-secondary text-center alert-rounded",attrs:{role:"alert"}},[t._v("\n          3.完成\n        ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v("\n                    顯示購物車細節\n                    "),a("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{scope:"col"}}),a("th",{attrs:{scope:"col"}}),a("th",{staticClass:"d-none d-lg-block",attrs:{scope:"col"}},[t._v("商品名稱")]),a("th",{staticClass:"d-lg-none",attrs:{scope:"col"}},[t._v("品名")]),a("th",{attrs:{scope:"col"}},[t._v("數量")]),a("th",{attrs:{scope:"col",width:"100"}},[t._v("小計")])])}],o=a("cebc"),i=a("2f62"),n={name:"CustomerOrder",data:function(){return{isLoading:!1,coupon_code:"",findCoupon:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:Object(o["a"])({removeCartItem:function(t){this.$store.dispatch("removeCartItem",t)},addCouponCode:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ho73","/coupon"),s={code:e.coupon_code};this.$http.post(a,{data:s}).then(function(a){console.log(a),t.getCart(),a.data.success?e.findCoupon="":(e.findCoupon=a.data.message,e.coupon_code="")})},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ho73","/order"),s=e.form;e.isLoading=!0,this.$validator.validate().then(function(r){r?t.$http.post(a,{data:s}).then(function(t){console.log("訂單已建立",t),t.data.success&&e.$router.push("/customer_checkout/".concat(t.data.orderId)),e.isLoading=!1}):(e.isLoading=!1,console.log("欄位不完整"))})}},Object(i["b"])(["getCart"])),computed:Object(o["a"])({},Object(i["c"])(["cart","cartNum"])),created:function(){this.getCart()}},l=n,c=(a("fd50"),a("2877")),d=Object(c["a"])(l,s,r,!1,null,"1d9d4a12",null);e["default"]=d.exports},7431:function(t,e,a){},fd50:function(t,e,a){"use strict";var s=a("7431"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-589d8e63.08ac549a.js.map